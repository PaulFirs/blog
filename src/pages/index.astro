---
import Layout from '../layouts/Layout.astro';
import SEO from '../components/SEO.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('posts'))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 3);
---

<Layout title="Home">
  <SEO 
    title="PaulFirs Blog" 
    description="Articles about programming, embedded systems, BareMetal development, and technology"
  />
  <section class="intro-section" style="margin-bottom:3rem;text-align:left;">
    <h1 style="text-align:left;">Paul Firs</h1>
    <h2 style="text-align:left;">Senior Embedded Systems Engineer</h2>
    <p class="subtitle subtitle-box" style="display:flex;align-items:center;gap:1em;">
      <img src="/result.png" alt="Avatar" style="height:4em;width:auto;border-radius:0.7em;box-shadow:0 2px 8px rgba(0,0,0,0.10);margin-right:1em;" />
      I'm Paul. I'm an embedded systems engineer, teacher and an eternal learner. 
      My philosophy is "Do it right - doing it badly happens on its own". Therefore I focus on CI/CD, testing and code quality.
      On this blog I share my knowledge about embedded systems, BareMetal development, programming and technology.
    </p>
  </section>
  {posts.length > 0 && (
    <section class="recent-posts">
      <h2>Recent Articles</h2>
      <ul class="posts-list">
        {posts.map((post) => (
          <li class="post-item">
            <span class="date">{post.data.date.toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'short',
              day: 'numeric'
            })}</span>
            <a href={`/blog/${post.slug}`}>{post.data.title}</a>
          </li>
        ))}
      </ul>
    </section>
  )}
</Layout>

<style>
  h1 {
  font-size: 1rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: var(--color-accent);
  text-align: left;
}

  h2 {
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 1rem;
  color: var(--color-accent);
  text-align: left;
}

  .intro-section {
    text-align: center;
    padding: 0rem 0;
    border-bottom: 2px solid rgba(212, 167, 106, 0.2);
  }

  .intro-section h1 {
    font-size: 2rem;
    margin-bottom: 0.5rem;
  }

  .subtitle {
    font-size: 1.25rem;
    color: var(--color-text-muted);
  }

  .subtitle-box {
  border: 1px solid var(--color-accent);
  border-radius: 6px;
  padding: 0.7em 1.2em;
  background: rgba(212, 167, 106, 0.07);
  display: inline-block;
}

  .recent-posts {
    margin-top: 3rem;
  }

  .posts-list {
    list-style: none;
    padding: 0;
    margin: 0 0 2rem 0;
  }

  .post-item {
    display: flex;
    gap: 2rem;
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(212, 167, 106, 0.1);
    align-items: baseline;
  }

  .post-item:last-child {
    border-bottom: none;
  }

  .date {
    color: var(--color-text-muted);
    font-size: 0.9rem;
    min-width: 120px;
    flex-shrink: 0;
  }

  .post-item a {
    color: var(--color-text);
    text-decoration: none;
    transition: color 0.2s;
    font-size: 1.1rem;
  }

  .post-item a:hover {
    color: var(--color-accent);
  }
</style>
