---
import Layout from '../layouts/Layout.astro';
import SEO from '../components/SEO.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('posts'))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 3);
---

<Layout title="Home">
  <SEO 
    title="Programmer's Blog" 
    description="Articles about programming, web development, and technology"
  />
  
  <div class="hero">
    <h1>Welcome</h1>
    <p class="subtitle">A blog about programming and development</p>
  </div>

  {posts.length > 0 && (
    <section class="recent-posts">
      <h2>Latest Posts</h2>
      <ul class="posts-list">
        {posts.map((post) => (
          <li class="post-item">
            <span class="date">{post.data.date.toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'short',
              day: 'numeric'
            })}</span>
            <a href={`/blog/${post.slug}`}>{post.data.title}</a>
          </li>
        ))}
      </ul>
      <a href="/blog" class="view-all">All posts â†’</a>
    </section>
  )}
</Layout>

<style>
  .hero {
    text-align: center;
    padding: 4rem 0;
    border-bottom: 2px solid rgba(212, 167, 106, 0.2);
    margin-bottom: 3rem;
  }

  .hero h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .subtitle {
    font-size: 1.25rem;
    color: var(--color-text-muted);
  }

  .recent-posts {
    margin-top: 3rem;
  }

  .recent-posts h2 {
    margin-bottom: 2rem;
  }

  .posts-list {
    list-style: none;
    padding: 0;
    margin: 0 0 2rem 0;
  }

  .post-item {
    display: flex;
    gap: 2rem;
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(212, 167, 106, 0.1);
    align-items: baseline;
  }

  .post-item:last-child {
    border-bottom: none;
  }

  .date {
    color: var(--color-text-muted);
    font-size: 0.9rem;
    min-width: 120px;
    flex-shrink: 0;
  }

  .post-item a {
    color: var(--color-text);
    text-decoration: none;
    transition: color 0.2s;
    font-size: 1.1rem;
  }

  .post-item a:hover {
    color: var(--color-accent);
  }

  .view-all {
    display: inline-block;
    padding: 0.75rem 1.5rem;
    background-color: transparent;
    border: 2px solid var(--color-accent);
    color: var(--color-accent);
    text-decoration: none;
    border-radius: 4px;
    font-weight: 600;
    transition: background-color 0.2s, color 0.2s;
  }

  .view-all:hover {
    background-color: var(--color-accent);
    color: var(--color-primary);
    opacity: 1;
  }
</style>
